FROM alpine:latest
ARG SUBMISSION_FILE_PATH
ARG INPUT_FILE_PATH
ENV TIME_LIMIT 0
COPY ${SUBMISSION_FILE_PATH} .
COPY ${INPUT_FILE_PATH} .
# build-base is a package that will install g++ and its dependencies, amongst other things.
RUN apk add build-base
RUN ["g++", "submission.cpp", "-o", "submission"]
RUN ["mkdir", "outputs"]
CMD ["/bin/sh", "-c", "timeout ${TIME_LIMIT} ./submission < input.txt > /outputs/submission.txt; echo $? > /outputs/timeout.txt"]
